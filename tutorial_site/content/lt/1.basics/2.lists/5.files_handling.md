---
title: 'Failų apdorojimas'
description: 'Bla bla bla'
draft: true
created_at: '2024-09-18'
updated_at: '2024-09-18'
authors:
  - 'Vilius Paliokas'
---

Išmoksime savo programoms suteikti daugiau dinamiškumo savo programoms - skaitysime iš failo ir įrašysime į failą.

## Keletas failų formatų

Pirma supažinkime su keleta failų formatų, kurios reiktų žinoti esant programuotoju. Nors susipažinsime su keleta, toliau dirbsime tik su vieno tipo *CSV*.

### Plėtinys

Prieš pereinant prie konkrečių tipų, reiktų išsiaiškinti formatą ir plėtinio skirtumus. Failams, kuriuose talpiname *Python* kodą, suteikiame vardą ir prirašome gale `.py`{ lang=text }. Ši failo pavadinimo dalis - galas vadinamas **plėtiniu** (*angl. extension*). Labai svarbu suprasti tai, kad **failo plėtinys nurodomas programoms, kad jos žinotų, ko tikėtis iš faile esančių duomenų** - kokia duomenų struktūrą ir ką jie reprezentuoja.

Jeigu sukurtume tekstinį failą pavadinimu `data.txt`{ lang=text }:

```text[data.txt]
Labas, mama.
```

Tai mūsų operacinė sistema bandant paleisti šį failą, atidarytų tekstinę rengyklę. Niekas nedraudžia šitam failui suteikti kitokį plėtinį:

```text[data.mp3]
Labas, mama.
```

Tokį failą operacinė sistema bandys atidaryti naudojant muzikos grotuvą. Atidarę turėtumėte pamatyti ekrane klaidą. Tokių failų apdorojimas vyksta priklausomai taip, kaip numatė jį programotuojas.  

Žemiau pateikta keletas plėtinių, kuriuos reiktų žinoti:

Dokumentų failai:

- `.txt`{lang=text}: paprastas tekstinis failas;
- `.pdf`{lang=text}: nešiojamojo dokumento formatas (*angl. Portable Document Format*);
- `.doc/.docx`{lang=text}: Microsoft Word dokumento failas;
- `.ppt/.pptxt`{lang=text}: Microsoft PowerPoint pateikčių failas;

Grafikos failai:

- `.jpg/.jpeg`{lang=text}: Joint Photographic Experts Group (atvaizdo formatas);
- `.png`{lang=text}: Portable Network Graphics (atvaizdo formatas);
- `.gif`{lang=text}: Graphics Interchange Format (atvaizdo formatas);
- `.bmp`{lang=text}: Bitmap image file (atvaizdo formatas);
- `.svg`{lang=text}: Scalable Vector Graphics (vektorinės grafikos formatas);
- `.webp`{lang=text}: Modernus atvaizdo formatas žiniatinkliui;

Audio ir video failai:

- `.mp3`{lang=text}: MPEG Audio Layer III (glaudtinas audio failų formatas);
- `.wav`{lang=text}: Waveform Audio File Format;
- `.flac`{lang=text}: Nemokamas glaudintas be praradimų (*angl. lossless*) audio kodekas (*angl. codec*);
- `.mp4`{lang=text}: MPEG-4 Part 14 (vienas iš populiaresnių failų formatų video medžiagai);
- `.webm`{lang=text}: Atviras video duomenų formatas žiniatinkliui;
- `.mkv`{lang=text}: Matroska Video (palaiko kelis garso ir subtitrų takelius);

Kita:

- `.xls/.xlsx`{lang=text}: Microsoft Excel skaičiuoklės failas;
- `.zip`: Glaudintas archyvinis failas;
- `.html`: HyperText Markup Language (Žymėjimo kalbos, naudojamo saitymo elementų atvaizdavimui, failas);
- `.css`: Cascading Style Sheets file (pakopinių stilių šablonų failas);
- `.rar`: RAR archyvinis failas;

Kiekvieno failo specifika skiriasi, tai išsiaiškinama, kada jie naudojami tiksliau ir kuo jie ypatingi, paliksime padaryti savarankiškai.

### Formatas

Failo formatas nurodo, kaip duomenys faile yra užkoduoti ir struktūrizuoti. Šis užkodavimas ir strūktura nulemia tai, kaip duomenys yra saugomi perskaitomi ir apdorojami programų. Kiekvienas failo formatas...

### JSON

d

### XML

c

### CSV

b

### Kita

a

## Skaitymas iš failo

Toliau visi darbai bus atliekami su `.csv`{ lang=python } failais. Padarysime taip, kad faile esantys duomenys, kaip kintamasis (-ieji), atsirastų mūsų programoje. Tokį perkėlimo veiksmą vadinsime failų nuskaitymu.

Kad atidarytumėme failą, jis turi egzistuoti jūsų įrenginyje, o kode tereikia panaudoti funkciją `open()`{ lang=python }:

```python
# In programming, there's a common convention to use 'f' as a short name for a file variable.
# This makes the code easier to read and understand for others who are familiar with this practice.
f = open("data.txt")
```

Tarkime, mūsų `data.txt`{ lang=text} faile yra toks tekstas:

```text[data.txt]
Hello, World!
```

Jeigu bandytume atspausdinti `f`{ lang=python } kintamąjį nepamatytumėme teksto. Pamatytumėte kažką panašaus į:

```console
<_io.TextIOWrapper name='data.txt' mode='r' encoding='UTF-8'>
```

Šiuo atveju kintamasis `f`{ lang=python } yra objektas (konkrečiau apie šią sąvoką sužinosite sekančiose pamokose), kuriame saugoma informacija apie atidarytą failą.

### `readline()`{ lang=python }

Anksčiau sukurtu objektu galime pasinaudoti, kad perskaitytumėme informaciją:

```python
f = open("data.txt")
line = f.readline()
print(line)
```

Terminale turėtumėte pamatyti mūsų tekstą `Hello, World!`{ lang=console }. Šitą eilutę iš duomenų failo gauname su `readline()`{ lang=python } metodu, o šis gražina `string`{ lang=python } tipo reikšmę. Pagal pavadinimą, galite suprasti, kad perskaito vieną eilutę (ir tik vieną!).

#### Failo pabaiga

Kas bus jeigu perskaitysime daugiau eilučių negu yra faile?

```python
f = open("data.txt")
line = f.readline() # 1st read
print(line)

line = f.readline() # 2nd read
print(line)

line = f.readline() # 3rd read
print(line)
```

Metodas `readline()`{ lang=python } gražins tuščią eilutę `""`{ lang=python }:

```console
Hello, World!


⁤
```

Tai reiškias `readline()`{ lang=python } galima skaityti visą failą, o jeigu jis baigsis metodas gražins tuščią eilutę.

O kas jeigu faile kažkur viduryje yra tuščia eilutė?

#### Keletas skaitymas su `readline()`{ lang=python }

Tarkime turime didesnį failą:

```text[bigger_data.txt]
My mother was a tailor
She sewed my new blue jeans
My father was a gamblin' man
Down in New Orleans

Now the only thing a gambler needs
Is a suitcase and a trunk
And the only time he's satisfied
Is when he's on a trump
Oh mother, tell your children
Not to do what I have done
Spend your lives in sin and misery
In the house of The Rising Sun
```

Kad galėtume su `readline()`{ lang=python } metodu perskaityti šešias eilutes, mums reikią šį metodą panaudoti penkis kartus. Perskaičius eilutę, kitą kartą skaitant, yra perskaitoma sekanti:

```python
f = open("bigger_data.txt")
print(f.readline()) # line 1
print(f.readline()) # line 2
print(f.readline()) # line 3
print(f.readline()) # line 4
print(f.readline()) # line 5
print(f.readline()) # line 6
```

Perskaičius ir atspausdintus 6 eilutes iš failo, gauname tokį rezultatą

```console
My mother was a tailor

She sewed my new blue jeans

My father was a gamblin' man

Down in New Orleans



Now the only thing a gambler needs

```

Gauname daug perteklinių tarpų. Jie atsiranda dėl to, kad faile, eilutės gale (ten, kur paspaudžiamas :keyboard-keys{:keys='["enter"]'} klavišas) yra naujos eilutės simbolis `\n`{ lang=text }. Tai `print()`{ lang=python } funkcija ir naujos eilutės simbolis `\n`{ lang=text } kartu duoda dvigubą naują eilutę. Kad jos išvengtume galima pašalinti iš perskaitytos eilutės tą simbolį arba `print()`{ lang=python } funkcijoje neišvedinėti (numatyto) naujos eilutės simbolio:

```python
f = open("bigger_data.txt")
print(f.readline().replace("\n", "")) # line 1, method 1
print(f.readline().replace("\n", "")) # line 2, method 1
print(f.readline().replace("\n", "")) # line 3, method 1
print(f.readline(), end="") # line 4, method 2
print(f.readline(), end="") # line 5, method 2
print(f.readline(), end="") # line 6, method 2
```

Dabar atspausdiname eilutes teisingai:

```console
My mother was a tailor
She sewed my new blue jeans
My father was a gamblin' man
Down in New Orleans

Now the only thing a gambler needs
```

Atkreipkite dėmesį, kad tuščia eilutė irgi perskaitoma, nes ji yra mūsų duomenų faile. 

## Apdorojimas



### Ę

## A